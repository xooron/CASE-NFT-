<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TON Cases Mini App</title>
    <!-- Подключаем Telegram SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #0b0c16;
            --panel: #111427;
            --card: #161a33;
            --blue: #2b58ff;
            --text-gray: #7d849b;
            --green: #2ecc71;
            --border: rgba(255, 255, 255, 0.05);
        }

        /* Убираем лишние скроллы и выделения */
        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
            user-select: none;
            scrollbar-width: none; 
        }
        ::-webkit-scrollbar { display: none; }

        body {
            margin: 0; padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            color: white;
            display: flex; flex-direction: column;
            height: 100vh; height: 100dvh;
            overflow: hidden;
        }

        /* --- ВЕРХНЯЯ ПАНЕЛЬ --- */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 14px 16px; background: var(--panel);
            border-bottom: 1px solid var(--border);
            z-index: 100;
        }
        .header-left { display: flex; align-items: center; gap: 10px; }
        .tg-avatar { width: 38px; height: 38px; border-radius: 50%; border: 1px solid var(--border); object-fit: cover; }
        .tg-name { font-size: 13px; font-weight: 700; display: block; }
        .online-status { font-size: 9px; color: var(--green); font-weight: 800; display: flex; align-items: center; gap: 4px; margin-top: 2px; }
        .online-dot { width: 5px; height: 5px; background: var(--green); border-radius: 50%; box-shadow: 0 0 5px var(--green); }

        .balance-group {
            display: flex; align-items: center;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 2px 2px 2px 12px; gap: 10px;
        }
        .bal-val { font-size: 14px; font-weight: 700; }
        .bal-ton { color: var(--blue); font-size: 11px; font-weight: 800; }
        .plus-btn {
            width: 28px; height: 28px; background: var(--blue);
            border: none; border-radius: 10px; color: white;
            font-size: 18px; font-weight: 700; display: flex;
            align-items: center; justify-content: center; cursor: pointer;
        }

        /* --- ОСНОВНОЙ КОНТЕЙНЕР --- */
        .container { flex-grow: 1; overflow-y: auto; padding: 16px; padding-bottom: 110px; }
        
        .screen { display: none; }
        .screen.active { display: block; }

        /* --- ВЕРСТКА КЕЙСОВ --- */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; }
        .case-card { background: var(--panel); border-radius: 20px; padding: 16px; text-align: center; border: 1px solid var(--border); }
        .case-title { font-size: 10px; font-weight: 800; text-transform: uppercase; color: var(--text-gray); margin-bottom: 10px; display: block; }
        .case-img { width: 80px; height: 80px; object-fit: contain; margin-bottom: 12px; }
        .case-btn { width: 100%; background: rgba(43, 88, 255, 0.1); border: 1px solid rgba(43, 88, 255, 0.1); color: #5c7fff; padding: 10px; border-radius: 12px; font-size: 11px; font-weight: 800; }

        /* --- ВЕРСТКА ИНВЕНТАРЯ --- */
        .inv-content { text-align: center; }
        .pepe-gif { width: 140px; margin-bottom: 15px; }
        .inv-h1 { font-size: 22px; font-weight: 800; margin-bottom: 6px; display: block; }
        .inv-h2 { font-size: 17px; font-weight: 700; display: block; margin-bottom: 4px; }
        .inv-h3 { font-size: 13px; color: var(--text-gray); display: block; margin-bottom: 25px; }

        .inv-list { text-align: left; max-width: 300px; margin: 0 auto; }
        .inv-row { display: flex; align-items: flex-start; gap: 14px; margin-bottom: 20px; }
        .inv-icon { color: var(--blue); margin-top: 2px; }
        .inv-txt-top { font-size: 14px; font-weight: 700; display: block; margin-bottom: 2px; }
        .inv-txt-bot { font-size: 11px; color: var(--text-gray); display: block; }

        /* --- ВЕРСТКА ПРОФИЛЯ --- */
        .card-p { background: var(--panel); border-radius: 24px; padding: 20px; margin-bottom: 16px; border: 1px solid var(--border); }
        .user-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .u-info { display: flex; align-items: center; gap: 12px; }
        .u-avatar { width: 54px; height: 54px; border-radius: 50%; border: 1px solid var(--border); background: #252841; }
        .connect-b { background: #252841; border: none; color: white; padding: 8px 14px; border-radius: 12px; font-size: 13px; font-weight: 600; }
        .dep-b { width: 100%; background: var(--blue); border: none; color: white; padding: 16px; border-radius: 16px; font-size: 16px; font-weight: 700; box-shadow: 0 4px 15px rgba(43, 88, 255, 0.2); }

        /* --- НИЖНЯЯ НАВИГАЦИЯ --- */
        nav {
            position: fixed; bottom: 0; width: 100%; display: flex; 
            background: var(--panel); border-top: 1px solid var(--border); padding: 10px 0 30px 0;
        }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; color: #505875; background: none; border: none; outline: none; }
        .nav-item.active { color: var(--blue); }
        .nav-item span { font-size: 10px; margin-top: 6px; font-weight: 700; }
        .nav-svg { width: 24px; height: 24px; fill: none; stroke: currentColor; stroke-width: 2.2; }
    </style>
</head>
<body>

    <header>
        <div class="header-left">
            <img id="avatar-img" src="" class="tg-avatar" style="display:none;">
            <div id="avatar-placeholder" class="tg-avatar" style="background:#252841;"></div>
            <div class="tg-info">
                <span id="u-name" class="tg-name">Загрузка...</span>
                <div class="online-status"><span class="online-dot"></span> <b id="online-num">1,402</b> В СЕТИ</div>
            </div>
        </div>
        <div class="balance-group">
            <span class="bal-val">1000</span>
            <span class="bal-ton">TON</span>
            <button class="plus-btn" onclick="switchTab('screen-profile', document.getElementById('nav-prof'))">+</button>
        </div>
    </header>

    <div class="container">
        
        <!-- КЕЙСЫ -->
        <div id="screen-cases" class="screen active">
            <div class="grid">
                <div class="case-card">
                    <span class="case-title">Ежедневный кейс</span>
                    <img src="https://cdn-icons-png.flaticon.com/512/6584/6584942.png" class="case-img">
                    <button class="case-btn">ОТКРЫТЬ</button>
                </div>
                <div class="case-card">
                    <span class="case-title">Бонусный кейс</span>
                    <img src="https://cdn-icons-png.flaticon.com/512/6584/6584942.png" class="case-img">
                    <button class="case-btn">ВВЕСТИ КОД</button>
                </div>
                <div class="case-card">
                    <span class="case-title">Депозит 3.69 TON</span>
                    <img src="https://cdn-icons-png.flaticon.com/512/6584/6584942.png" class="case-img">
                    <button class="case-btn">ПОЛУЧИТЬ</button>
                </div>
                <div class="case-card">
                    <span class="case-title">Депозит 7.49 TON</span>
                    <img src="https://cdn-icons-png.flaticon.com/512/6584/6584942.png" class="case-img">
                    <button class="case-btn">ПОЛУЧИТЬ</button>
                </div>
            </div>
        </div>

        <!-- ИНВЕНТАРЬ -->
        <div id="screen-inventory" class="screen">
            <div class="inv-content">
                <img src="https://stickers.fullyst.com/967291c8-a210-5ea4-9cdd-8b656eedba6a/full/AgAD-FkAAtRusUs.webp" class="pepe-gif">
                <span class="inv-h1">Инвентарь пуст</span>
                <span class="inv-h2">Есть подарки на аккаунте?</span>
                <span class="inv-h3">Добавь их через бота и получи TON!</span>

                <div class="inv-list">
                    <div class="inv-row">
                        <svg class="inv-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/></svg>
                        <div class="inv-txt">
                            <span class="inv-txt-top">Перейди в бота</span>
                            <span class="inv-txt-bot">или по нику: @ТУТ БУДЕТ ТВОЙ НИК</span>
                        </div>
                    </div>
                    <div class="inv-row">
                        <svg class="inv-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="3" y="8" width="18" height="12" rx="2"/><path d="M12 8V21M7 8a4 4 0 0 1 0-8c2 0 5 4 5 4s3-4 5-4a4 4 0 1 1 0 8"/></svg>
                        <div class="inv-txt">
                            <span class="inv-txt-top">Отправь подарок боту</span>
                            <span class="inv-txt-bot">количество подарков не ограничено</span>
                        </div>
                    </div>
                    <div class="inv-row">
                        <svg class="inv-icon" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/></svg>
                        <div class="inv-txt">
                            <span class="inv-txt-top">Быстрый обмен</span>
                            <span class="inv-txt-bot">Получите TON на ваш баланс</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- ПРОФИЛЬ -->
        <div id="screen-profile" class="screen">
            <div class="card-p">
                <div class="user-row">
                    <div class="u-info">
                        <img id="p-avatar" src="" class="u-avatar" style="display:none;">
                        <div id="p-avatar-placeholder" class="u-avatar" style="background:#252841;"></div>
                        <div>
                            <span id="p-name" class="tg-name" style="font-size: 17px;">Пользователь</span>
                            <span id="p-username" style="font-size: 13px; color: var(--text-gray); display: block;">@username</span>
                        </div>
                    </div>
                    <button class="connect-b">Подключить</button>
                </div>
                <button class="dep-b">Пополнить</button>
            </div>
            
            <div class="card-p" style="padding: 24px 20px;">
                <span style="font-size: 18px; font-weight: 800; margin-bottom: 20px; display: block;">Реферальная ссылка</span>
                <div style="background: #0a0b1e; border: 1px solid #1c1f35; border-radius: 12px; padding: 14px; font-size: 12px; color: #8c92b3; font-family: monospace; overflow: hidden; text-overflow: ellipsis; margin-bottom: 20px;">
                    t.me/ТУТ БУДЕТ ТВОЙ БОТ?start=774146644
                </div>
                <div class="grid">
                    <div style="background: #0f1228; padding: 15px; border-radius: 16px; text-align: center;">
                        <span style="font-size: 10px; color: var(--text-gray); display: block; margin-bottom: 4px;">Баланс</span>
                        <div style="font-size: 16px; font-weight: 800;">0.0 <span style="font-size: 11px; color: var(--text-gray);">TON</span></div>
                    </div>
                    <div style="background: #0f1228; padding: 15px; border-radius: 16px; text-align: center;">
                        <span style="font-size: 10px; color: var(--text-gray); display: block; margin-bottom: 4px;">Заработано</span>
                        <div style="font-size: 16px; font-weight: 800;">0.0 <span style="font-size: 11px; color: var(--text-gray);">TON</span></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- НАВИГАЦИЯ -->
    <nav>
        <button class="nav-item active" onclick="switchTab('screen-cases', this)">
            <svg class="nav-svg" viewBox="0 0 24 24"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg>
            <span>Кейсы</span>
        </button>
        <button class="nav-item" onclick="switchTab('screen-inventory', this)">
            <svg class="nav-svg" viewBox="0 0 24 24"><path d="M20 12V8H6a2 2 0 0 1-2-2c0-1.1.9-2 2-2h12v4"/><path d="M4 6v12c0 1.1.9 2 2 2h14v-4"/><path d="M18 12a2 2 0 0 0-2 2c0 1.1.9 2 2 2h4v-4h-4z"/></svg>
            <span>Инвентарь</span>
        </button>
        <button id="nav-prof" class="nav-item" onclick="switchTab('screen-profile', this)">
            <svg class="nav-svg" viewBox="0 0 24 24"><circle cx="12" cy="7" r="4"/><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/></svg>
            <span>Профиль</span>
        </button>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.ready();

        // Данные пользователя из Telegram
        const user = tg.initDataUnsafe?.user;
        if (user) {
            document.getElementById('u-name').innerText = user.first_name;
            document.getElementById('p-name').innerText = user.first_name;
            document.getElementById('p-username').innerText = user.username ? '@' + user.username : 'id' + user.id;
            
            if (user.photo_url) {
                const heads = [document.getElementById('avatar-img'), document.getElementById('p-avatar')];
                const placeholders = [document.getElementById('avatar-placeholder'), document.getElementById('p-avatar-placeholder')];
                heads.forEach(img => { img.src = user.photo_url; img.style.display = 'block'; });
                placeholders.forEach(p => p.style.display = 'none');
            }
        }

        // Переключение вкладок
        function switchTab(id, btn) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            
            const target = document.getElementById(id);
            target.classList.add('active');
            btn.classList.add('active');

            if (tg.HapticFeedback) tg.HapticFeedback.impactOccurred('light');
        }

        // Имитация настоящего онлайна
        setInterval(() => {
            const el = document.getElementById('online-num');
            let val = parseInt(el.innerText.replace(',', ''));
            el.innerText = (val + (Math.floor(Math.random() * 5) - 2)).toLocaleString('en-US');
        }, 3000);
    </script>
</body>
</html>