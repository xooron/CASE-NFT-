<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>TON Cases Premium</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #05060e;
            --panel: rgba(22, 26, 51, 0.6);
            --card: rgba(30, 35, 66, 0.8);
            --accent: #2b58ff;
            --accent-glow: rgba(43, 88, 255, 0.4);
            --text-main: #ffffff;
            --text-gray: #94a3b8;
            --green: #10b981;
            --border: rgba(255, 255, 255, 0.08);
        }

        * { 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
            user-select: none;
            transition: all 0.2s ease;
        }

        body {
            margin: 0; padding: 0;
            font-family: 'Inter', sans-serif;
            background-color: var(--bg);
            background-image: radial-gradient(circle at top right, #1a1c3a 0%, #05060e 50%);
            color: var(--text-main);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- HEADER --- */
        header {
            display: flex; justify-content: space-between; align-items: center;
            padding: 15px 20px;
            background: var(--panel);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border);
            z-index: 100;
        }
        .header-left { display: flex; align-items: center; gap: 12px; }
        .tg-avatar { 
            width: 40px; height: 40px; 
            border-radius: 12px; 
            border: 2px solid var(--accent);
            object-fit: cover;
        }
        .tg-name { font-size: 14px; font-weight: 700; }
        .online-status { font-size: 10px; color: var(--green); display: flex; align-items: center; gap: 5px; opacity: 0.8; }
        .online-dot { width: 6px; height: 6px; background: var(--green); border-radius: 50%; box-shadow: 0 0 8px var(--green); }

        .balance-card {
            background: rgba(43, 88, 255, 0.15);
            border: 1px solid var(--accent);
            padding: 6px 12px;
            border-radius: 12px;
            display: flex; align-items: center; gap: 8px;
        }
        .balance-card span { font-weight: 800; font-size: 15px; }

        /* --- –ë–ï–°–ö–û–ù–ï–ß–ù–ê–Ø –õ–ï–ù–¢–ê (–§–ò–ö–° –ë–ê–ì–û–í) --- */
        .tape-wrapper {
            background: rgba(0,0,0,0.2);
            padding: 15px 0;
            overflow: hidden;
            position: relative;
            border-bottom: 1px solid var(--border);
        }
        .tape-track {
            display: flex;
            gap: 15px;
            width: max-content;
            animation: scroll 30s linear infinite;
            will-change: transform;
        }
        .tape-item {
            width: 65px; height: 65px;
            background: var(--card);
            border-radius: 15px;
            padding: 5px;
            border: 1px solid var(--border);
            flex-shrink: 0;
        }
        .tape-item img { 
            width: 100%; height: 100%; 
            object-fit: cover; 
            border-radius: 10px; 
        }

        @keyframes scroll {
            0% { transform: translateX(0); }
            100% { transform: translateX(-50%); } /* –°–¥–≤–∏–≥ —Ä–æ–≤–Ω–æ –Ω–∞ –ø–æ–ª–æ–≤–∏–Ω—É –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        }

        /* --- –ö–û–ù–¢–ï–ù–¢ --- */
        .container { 
            flex-grow: 1; 
            overflow-y: auto; 
            padding: 20px; 
            padding-bottom: 100px;
            scroll-behavior: smooth;
        }
        
        .screen { 
            display: none; 
            animation: fadeIn 0.4s ease forwards;
        }
        .screen.active { display: block; }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            font-size: 12px; font-weight: 800; text-transform: uppercase;
            color: var(--text-gray); margin: 25px 0 15px 5px;
            letter-spacing: 1.5px; display: block;
        }

        /* --- –ö–ê–†–¢–û–ß–ö–ò –ö–ï–ô–°–û–í --- */
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
        
        .case-card {
            background: var(--card);
            border-radius: 24px;
            padding: 15px;
            text-align: center;
            border: 1px solid var(--border);
            position: relative;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        .case-card:active { transform: scale(0.95); background: var(--panel); }
        
        .case-img { 
            width: 90px; height: 90px; 
            object-fit: cover; 
            border-radius: 18px; 
            margin-bottom: 12px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        .case-name { font-size: 14px; font-weight: 700; margin-bottom: 10px; display: block; }
        
        .btn-price {
            width: 100%;
            background: var(--accent);
            color: white;
            border: none;
            padding: 10px;
            border-radius: 14px;
            font-weight: 800;
            font-size: 12px;
            box-shadow: 0 4px 12px var(--accent-glow);
        }

        /* --- –ò–ù–í–ï–ù–¢–ê–†–¨ --- */
        .inventory-item {
            background: var(--card);
            border-radius: 20px;
            padding: 12px;
            display: flex; align-items: center; gap: 15px;
            margin-bottom: 12px;
            border: 1px solid var(--border);
        }
        .inv-img { width: 60px; height: 60px; border-radius: 12px; object-fit: cover; }
        .inv-info { flex-grow: 1; }
        .inv-name { font-weight: 700; font-size: 15px; display: block; }
        .inv-price { color: var(--accent); font-weight: 800; font-size: 13px; }
        
        .btn-action {
            padding: 8px 15px; border-radius: 10px; border: none;
            font-size: 11px; font-weight: 700; color: white;
        }

        /* --- –ù–ê–í–ò–ì–ê–¶–ò–Ø --- */
        nav {
            position: fixed; bottom: 0; width: 100%;
            display: flex; justify-content: space-around;
            background: rgba(11, 13, 28, 0.95);
            backdrop-filter: blur(20px);
            padding: 10px 0 30px 0;
            border-top: 1px solid var(--border);
        }
        .nav-item { 
            display: flex; flex-direction: column; align-items: center; 
            color: var(--text-gray); background: none; border: none; opacity: 0.6;
        }
        .nav-item.active { color: var(--accent); opacity: 1; transform: translateY(-2px); }
        .nav-item span { font-size: 11px; font-weight: 700; margin-top: 5px; }
        .nav-svg { width: 24px; height: 24px; fill: none; stroke: currentColor; stroke-width: 2.5; }

        /* –ü–†–û–§–ò–õ–¨ */
        .profile-box {
            background: var(--card);
            border-radius: 30px;
            padding: 30px 20px;
            text-align: center;
            border: 1px solid var(--border);
        }
        .p-avatar { width: 90px; height: 90px; border-radius: 25px; border: 3px solid var(--accent); margin-bottom: 15px; }
    </style>
</head>
<body>

    <header>
        <div class="header-left">
            <img id="avatar-img" src="https://via.placeholder.com/100" class="tg-avatar">
            <div>
                <span id="u-name" class="tg-name">–ó–∞–≥—Ä—É–∑–∫–∞...</span>
                <div class="online-status"><span class="online-dot"></span> <b id="online-num">1,402</b> ONLINE</div>
            </div>
        </div>
        <div class="balance-card">
            <span id="user-balance">0.00</span>
            <small style="font-weight: 800; font-size: 10px; color: #829fff;">TON</small>
        </div>
    </header>

    <!-- –ü–õ–ê–í–ù–ê–Ø –õ–ï–ù–¢–ê -->
    <div class="tape-wrapper">
        <div class="tape-track" id="nft-tape">
            <!-- –°–∫—Ä–∏–ø—Ç –∑–∞–ø–æ–ª–Ω–∏—Ç —ç—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ç–≤–æ–∏–º–∏ —Å—Å—ã–ª–∫–∞–º–∏ -->
        </div>
    </div>

    <div class="container">
        
        <!-- –ö–ï–ô–°–´ -->
        <div id="screen-cases" class="screen active">
            <span class="section-title">üî• –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –∫–µ–π—Å—ã</span>
            <div class="grid">
                <div class="case-card" onclick="openCase('cheap_1')">
                    <img src="https://avatars.mds.yandex.net/i?id=d1d22a2684e59fc7a6853e2e5f58a1b9c37b03e4-9167398-images-thumbs&n=13" class="case-img">
                    <span class="case-name">–ù–æ–≤–∏—á–æ–∫</span>
                    <button class="btn-price">0.20 TON</button>
                </div>
                <div class="case-card" onclick="openCase('cheap_3')">
                    <img src="https://avatars.mds.yandex.net/i?id=bd5722984e37f2b5d60bb6fb770a7db8c7adf1e6-4789343-images-thumbs&n=13" class="case-img">
                    <span class="case-name">–°—Ç–∞–Ω–¥–∞—Ä—Ç</span>
                    <button class="btn-price">1.00 TON</button>
                </div>
                <div class="case-card" onclick="openCase('mid_2')">
                    <img src="https://avatars.mds.yandex.net/i?id=950272bf7d6aaa2e9f0f51efdacec8b2fad18d3e-4628606-images-thumbs&n=13" class="case-img">
                    <span class="case-name">–í–µ–∑—É–Ω—á–∏–∫</span>
                    <button class="btn-price">10.0 TON</button>
                </div>
                <div class="case-card" onclick="openCase('high_2')">
                    <img src="https://avatars.mds.yandex.net/i?id=219e744c2c0aad726af1ae93c4b7c04d80893b08-5235887-images-thumbs&n=13" class="case-img">
                    <span class="case-name">–®–µ–π—Ö</span>
                    <button class="btn-price">100 TON</button>
                </div>
            </div>

            <span class="section-title">üéÅ –ë–µ—Å–ø–ª–∞—Ç–Ω–æ–µ</span>
            <div class="grid">
                <div class="case-card" onclick="openCase('daily')">
                    <img src="https://avatars.mds.yandex.net/i?id=c30ff46259e17421c1c07524a6f58bc853d9ace3-3751671-images-thumbs&n=13" class="case-img">
                    <span class="case-name">–ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π</span>
                    <button class="btn-price" style="background: var(--green);">–û–¢–ö–†–´–¢–¨</button>
                </div>
            </div>
        </div>

        <!-- –ò–ù–í–ï–ù–¢–ê–†–¨ -->
        <div id="screen-inventory" class="screen">
            <div id="inventory-list">
                <div style="text-align: center; color: var(--text-gray); padding-top: 50px;">
                    –¢—É—Ç –ø–æ–∫–∞ –ø—É—Å—Ç–æ...
                </div>
            </div>
        </div>

        <!-- –ü–†–û–§–ò–õ–¨ -->
        <div id="screen-profile" class="screen">
            <div class="profile-box">
                <img id="p-avatar" src="https://via.placeholder.com/100" class="p-avatar">
                <h2 id="p-name" style="margin: 0;">User</h2>
                <p id="p-username" style="color: var(--text-gray); margin-bottom: 25px;">@username</p>
                
                <button class="btn-price" onclick="simulateDeposit()" style="margin-bottom: 10px;">–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å</button>
                <button class="btn-price" style="background: #252841;">–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫–æ—à–µ–ª–µ–∫</button>
            </div>
        </div>

    </div>

    <nav>
        <button class="nav-item active" onclick="switchTab('screen-cases', this)">
            <svg class="nav-svg" viewBox="0 0 24 24"><path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"></path><polyline points="3.27 6.96 12 12.01 20.73 6.96"></polyline><line x1="12" y1="22.08" x2="12" y2="12"></line></svg>
            <span>–ö–µ–π—Å—ã</span>
        </button>
        <button class="nav-item" onclick="switchTab('screen-inventory', this)">
            <svg class="nav-svg" viewBox="0 0 24 24"><path d="M20 7h-9l-3-3H2v16h20V7z"></path></svg>
            <span>–ò–Ω–≤–µ–Ω—Ç–∞—Ä—å</span>
        </button>
        <button class="nav-item" onclick="switchTab('screen-profile', this)">
            <svg class="nav-svg" viewBox="0 0 24 24"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            <span>–ü—Ä–æ—Ñ–∏–ª—å</span>
        </button>
    </nav>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();

        let balance = 0.00;
        let inventory = [];
        
        // –¢–≤–æ–∏ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–∏
        const nftImages = [
            "https://avatars.mds.yandex.net/i?id=d1d22a2684e59fc7a6853e2e5f58a1b9c37b03e4-9167398-images-thumbs&n=13",
            "https://avatars.mds.yandex.net/i?id=bd5722984e37f2b5d60bb6fb770a7db8c7adf1e6-4789343-images-thumbs&n=13",
            "https://avatars.mds.yandex.net/i?id=950272bf7d6aaa2e9f0f51efdacec8b2fad18d3e-4628606-images-thumbs&n=13",
            "https://avatars.mds.yandex.net/i?id=c30ff46259e17421c1c07524a6f58bc853d9ace3-3751671-images-thumbs&n=13",
            "https://avatars.mds.yandex.net/i?id=219e744c2c0aad726af1ae93c4b7c04d80893b08-5235887-images-thumbs&n=13",
            "https://avatars.mds.yandex.net/i?id=5033001e66721cd2619b786171806f9a90e38a08-5666317-images-thumbs&n=13"
        ];

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–µ–Ω—Ç—ã (–¥—É–±–ª–∏—Ä—É–µ–º 2 —Ä–∞–∑–∞ –¥–ª—è –±–µ—Å—à–æ–≤–Ω–æ—Å—Ç–∏)
        function initTape() {
            const track = document.getElementById('nft-tape');
            const doubleImages = [...nftImages, ...nftImages, ...nftImages]; // –ë–æ–ª—å—à–µ –∫–æ–ø–∏–π –¥–ª—è –¥–ª–∏–Ω–Ω—ã—Ö —ç–∫—Ä–∞–Ω–æ–≤
            doubleImages.forEach(src => {
                const div = document.createElement('div');
                div.className = 'tape-item';
                div.innerHTML = `<img src="${src}">`;
                track.appendChild(div);
            });
        }
        initTape();

        // –î–∞–Ω–Ω—ã–µ —é–∑–µ—Ä–∞
        const user = tg.initDataUnsafe?.user;
        if (user) {
            document.getElementById('u-name').innerText = user.first_name;
            document.getElementById('p-name').innerText = user.first_name;
            document.getElementById('p-username').innerText = user.username ? '@' + user.username : 'ID: ' + user.id;
            if (user.photo_url) {
                document.getElementById('avatar-img').src = user.photo_url;
                document.getElementById('p-avatar').src = user.photo_url;
            }
        }

        function switchTab(screenId, btn) {
            document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            document.getElementById(screenId).classList.add('active');
            btn.classList.add('active');
            if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
        }

        function openCase(type) {
            const prices = { cheap_1: 0.2, cheap_3: 1, mid_2: 10, high_2: 100, daily: 0 };
            const cost = prices[type];

            if (balance < cost) {
                tg.showAlert("–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ TON –¥–ª—è –æ—Ç–∫—Ä—ã—Ç–∏—è!");
                return;
            }

            balance -= cost;
            
            // –õ–æ–≥–∏–∫–∞ –≤—ã–∏–≥—Ä—ã—à–∞ (—Å–ª—É—á–∞–π–Ω–æ–µ —Ñ–æ—Ç–æ –∏–∑ —Å–ø–∏—Å–∫–∞)
            const randomImg = nftImages[Math.floor(Math.random() * nftImages.length)];
            const winPrice = (cost * (Math.random() * 1.5)).toFixed(2);
            
            const item = {
                name: "NFT Collectible",
                price: winPrice,
                img: randomImg
            };

            inventory.push(item);
            updateUI();
            
            tg.showConfirm(`–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–±–∏–ª–∏ NFT —Å—Ç–æ–∏–º–æ—Å—Ç—å—é ${winPrice} TON! –ü–µ—Ä–µ–π—Ç–∏ –≤ –∏–Ω–≤–µ–Ω—Ç–∞—Ä—å?`, (ok) => {
                if(ok) switchTab('screen-inventory', document.querySelectorAll('.nav-item')[1]);
            });
        }

        function updateUI() {
            document.getElementById('user-balance').innerText = balance.toFixed(2);
            const list = document.getElementById('inventory-list');
            
            if (inventory.length === 0) {
                list.innerHTML = `<div style="text-align: center; color: var(--text-gray); padding-top: 50px;">–¢—É—Ç –ø–æ–∫–∞ –ø—É—Å—Ç–æ...</div>`;
                return;
            }

            list.innerHTML = '';
            inventory.forEach((item, index) => {
                const div = document.createElement('div');
                div.className = 'inventory-item';
                div.innerHTML = `
                    <img src="${item.img}" class="inv-img">
                    <div class="inv-info">
                        <span class="inv-name">${item.name}</span>
                        <span class="inv-price">${item.price} TON</span>
                    </div>
                    <button class="btn-action" style="background: var(--green);" onclick="sellItem(${index})">–ü—Ä–æ–¥–∞—Ç—å</button>
                `;
                list.appendChild(div);
            });
        }

        function sellItem(index) {
            balance += parseFloat(inventory[index].price);
            inventory.splice(index, 1);
            updateUI();
            if(tg.HapticFeedback) tg.HapticFeedback.notificationOccurred('success');
        }

        function simulateDeposit() {
            const amount = parseFloat(prompt("–í–≤–µ–¥–∏—Ç–µ —Å—É–º–º—É TON –¥–ª—è —Ç–µ—Å—Ç–∞:"));
            if(amount) {
                balance += amount;
                updateUI();
            }
        }

        // –≠—Ñ—Ñ–µ–∫—Ç –æ–Ω–ª–∞–π–Ω–∞
        setInterval(() => {
            const el = document.getElementById('online-num');
            let val = parseInt(el.innerText.replace(',', ''));
            el.innerText = (val + Math.floor(Math.random() * 3 - 1)).toLocaleString();
        }, 5000);

    </script>
</body>
</html>
